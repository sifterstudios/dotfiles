{
	description = "Sifter's nix-darwin system flake"; inputs = {
	nixpkgs.url = "github:NixOS/nixpkgs/nixpkgs-unstable"; nix-darwin.url = "github:LnL7/nix-darwin/master"; nix-darwin.inputs.nixpkgs.follows = "nixpkgs"; nix-homebrew.url = "github:zhaofengli-wip/nix-homebrew"; mac-app-util.url = "github:hraban/mac-app-util"; };
	outputs = inputs@{ self, nix-darwin, nixpkgs, nix-homebrew, mac-app-util }: let
	configuration = { pkgs, ... }: { 
	# List packages installed in system profile. To search by name, run: # $ nix-env -qaP | grep wget 
	nixpkgs.config.allowUnfree = true; 
	environment.systemPackages = [
	pkgs.neovim
	pkgs.gh
	pkgs.yabai
	pkgs.jetbrains.webstorm
	pkgs.jetbrains.rust-rover
	pkgs.jetbrains.rider
	pkgs.firefox
	pkgs.flutter
	pkgs.kotlin
	pkgs.rustup
	pkgs.vscode
	pkgs.cyberduck
	pkgs.karabiner-elements
	pkgs.hidden-bar
	pkgs.warp-terminal
	pkgs.android-tools
	pkgs.code-cursor
	pkgs.git-lfs
	pkgs.yarn
	pkgs.ruby
	pkgs.llvm
	pkgs.skhd
	pkgs.thefuck
	pkgs.postman
	pkgs.spotify
	pkgs.discord
	pkgs.slack
	pkgs.ansible
	pkgs.obsidian
	pkgs.kitty
	pkgs.tmux
	pkgs.fzf
	pkgs.ripgrep
	pkgs.brave
	pkgs.google-chrome pkgs.arc-browser
	pkgs.cmake
	pkgs.unzip
	pkgs.libtool
	pkgs.gettext
	pkgs.curl
	pkgs.btop
	pkgs.go
	pkgs.lsof
	pkgs.ccache
	pkgs.ninja
	pkgs.python3
	pkgs.moreutils
	pkgs.clang
	pkgs.clang-tools
	pkgs.lazygit
	pkgs.asdf
	pkgs.nerd-fonts.jetbrains-mono
	pkgs.nerd-fonts.victor-mono
	pkgs.oh-my-zsh
	pkgs.zsh-powerlevel10k pkgs.zsh-autosuggestions 
      ];
	homebrew = {
	enable = true;
	brews = [
	"asdf"
	"mas"
          "rust-analyzer"
	];
	casks = [
	"alfred"
	"ghostty"
	"vlc"
	"vivaldi"
	"godot"
	"android-studio"
	"jetbrains-toolbox"
	"flutter"
	"android-commandlinetools"
	];
        masApps = {
          "xCode" = 497799835;
          "Yoink" = 457622435;
          "ScreenFloat" = 414528154;
          "Transloader" = 572281534;
          "Hidden Bar" = 1452453066;
          "Amphetamine" = 937984704;
          "Spark Classic" = 1176895641;
          "iStat Menus" = 6499559693;
          "ColorSlurp" = 1287239339;
        };
	};

	
# in fonts.packages
fonts.packages = [
        # (
        #     # â“˜ install the following nerd fonts onto the system
        #     pkgs.nerdfonts.override {
        #         fonts = [
        #             "JetBrainsMono"
        #         ];
        #     }
        # )
        # use instead :
        pkgs.nerd-fonts.jetbrains-mono
        pkgs.nerd-fonts.victor-mono
    ];

	# Necessary for using flakes on this system.
	nix.settings.experimental-features = "nix-command flakes";
	# Set Git commit hash for darwin-version.
	system.configurationRevision = self.rev or self.dirtyRev or null;
	system.stateVersion = 6;
	nixpkgs.hostPlatform = "aarch64-darwin"; };
	in
	{
	darwinConfigurations."m4" = nix-darwin.lib.darwinSystem { modules = [
	configuration
	nix-homebrew.darwinModules.nix-homebrew {
	nix-homebrew = {
	enable = true;
	enableRosetta = true; user = "sifter";
	};
	}
	mac-app-util.darwinModules.default ];
	};
	};
	}
